{
    "$schema": "http://json-schema.org/schema",
    "$id": "gamepadyn-config",
    "title": "Gamepadyn Configuration Schema",
    "description": "A configuration for an individual controller. DO NOT modify!",
    "type": "object",
    "properties": {
        "description": {
            "description": "A summary of the configuration",
            "type": "string"
        },
        "maps": {
            "description": "The per-input action mappings",
            "type": "object",
            "properties": {
                "fd": {
                    "description": "Face Button Down (`A` w/ XBox layout)",
                    "$ref": "#/$defs/DigitalInput"
                },
                "fr": {
                    "description": "Face Button Right (`B` w/ XBox layout)",
                    "$ref": "#/$defs/DigitalInput"
                },
                "fl": {
                    "description": "Face Button Left (`X` w/ XBox layout)",
                    "$ref": "#/$defs/DigitalInput"
                },
                "fu": {
                    "description": "Face Button Up (`Y` w/ XBox layout)",
                    "$ref": "#/$defs/DigitalInput"
                },
                "du": {
                    "description": "D-Pad Up",
                    "$ref": "#/$defs/DigitalInput"
                },
                "dd": {
                    "description": "D-Pad Down",
                    "$ref": "#/$defs/DigitalInput"
                },
                "dl": {
                    "description": "D-Pad Left",
                    "$ref": "#/$defs/DigitalInput"
                },
                "dr": {
                    "description": "D-Pad Right",
                    "$ref": "#/$defs/DigitalInput"
                },
                "tr": {
                    "description": "Trigger Right",
                    "$ref": "#/$defs/AnalogInput"
                },
                "tl": {
                    "description": "Trigger Left",
                    "$ref": "#/$defs/AnalogInput"
                },
                "br": {
                    "description": "Bumper Right",
                    "$ref": "#/$defs/DigitalInput"
                },
                "bl": {
                    "description": "Bumper Left",
                    "$ref": "#/$defs/DigitalInput"
                },
                "sr": {
                    "description": "Right Stick",
                    "$ref": "#/$defs/AnalogInput"
                },
                "srb": {
                    "description": "Right Stick Button",
                    "$ref": "#/$defs/DigitalInput"
                },
                "sl": {
                    "description": "Left Stick",
                    "$ref": "#/$defs/AnalogInput"
                },
                "slb": {
                    "description": "Left Stick Button",
                    "$ref": "#/$defs/DigitalInput"
                }
            }
        }
    },
    
    "$defs": {
        "SharedDigitalSettings": {
            "properties": {
                "axis": {
                    "description": "The analog axis that this map affects",
                    "type": "integer",
                    "minimum": 0
                }
            },
            "required": [ "axis" ]
        },
        "AnalogMapModeMap": {
            "properties": {
                "depressedValue": {
                    "description": "The value of the axis while the button is depressed",
                    "type": "number"
                },
                "releasedValue": {
                    "description": "The value of the axis while the button is released. LEAVE THIS AS NULL if you want other inputs to map/change the action.",
                    "type": [ "number", "null" ]
                }
            },
            "$ref": "#/$defs/SharedDigitalSettings",
            "required": [ "depressedValue" ]
        },
        "AnalogOffsetModeMap": {
            "properties": {
                "offsetRate": {
                    "description": "The rate at which the axis should be changed while the button is depressed. Can be negative.",
                    "type": "number"
                }
            },
            "$ref": "#/$defs/SharedDigitalSettings",
            "required": [ "offsetRate" ]
        },
        "OneToOneAxesModeMap": {
            "properties": {
                "action": {
                    "description": "The action that this input maps on to.",
                    "type": "string"
                },
                "inputScale": {
                    "description": "The scale of the input.",
                    "type": [ "array", "null" ],
                    "items": { "type": "number" }
                }
            },
            "required": [ "action" ]
        },
        "SplitAxesSetting": {
            "properties": {
                "axisScale": {
                    "description": "The scale of the input axis",
                    "type": [ "number", "null" ],
                    "default": null
                },
                "targetAction": {
                    "description": "The action to map onto/offset",
                    "type": "string"
                },
                "targetAxis": {
                    "description": "The axis of the action to map onto/offset",
                    "type": "integer"
                },
                "mode": {
                    "description": "Whether to either set or offset the axis.",
                    "type": "string",
                    "enum": [ "SET", "OFFSET" ]
                }
            },
            "required": [ "targetAction", "targetAxis", "mode" ]
        },
        "SplitAxesModeMap": {
            "properties": {
                "axisMaps": {
                    "description": "A mapping for each axis. Elements can be null.",
                    "type": "array",
                    "items": {
                        "type": [ "object", "null" ],
                        "$ref": "#/$defs/SplitAxesSetting"
                    }
                }
            },
            "required": [ "axisMaps" ]
        },
        "DigitalInput": {
            "title": "A digital input.",
            "type": "object",
            "properties": {
                "mode": {
                    "description": "The digital input mode. See MappingActionDigital.java for more info.",
                    "type": "string",
                    "enum": [ "TRIGGER", "ANALOG_MAP", "ANALOG_OFFSET" ]
                },
                "action": {
                    "description": "The action that the digital mapping refers to.",
                    "type": "string"
                }
            },
            "required": [ "mode", "action" ],
            "if": { "properties": { "mode": { "const": "ANALOG_MAP" } } },
            "then": { "$ref": "#/$defs/AnalogMapModeMap" },
            "else": {
                "if": { "properties": { "mode": { "const": "ANALOG_OFFSET" } } },
                "then": { "$ref": "#/$defs/AnalogOffsetModeMap" },
                "else": { }
            }
        },
        "AnalogInput": {
            "title": "An analog input.",
            "type": "object",
            "properties": {
                "mode": {
                    "description": "The analog input mode. See MappingActionAnalog.java for more info.",
                    "type": "string",
                    "enum": [ "ONE_TO_ONE_AXES", "SPLIT_AXES" ]
                }
            },
            "if": { "properties": { "mode": { "const": "ONE_TO_ONE_AXES" } } },
            "then": { "$ref": "#/$defs/OneToOneAxesModeMap" },
            "else": {
                "if": { "properties": { "mode": { "const": "SPLIT_AXES" } } },
                "then": { "$ref": "#/$defs/SplitAxesModeMap" }
            }
        }
    },
    "required": [ "maps" ]
}